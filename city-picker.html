<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>省市区三级联动</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 10px;
    }
    select {
      margin-right: 10px;
      padding: 5px;
    }
  </style>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- Citys 插件（可本地托管，以下链接需替换为你部署的）-->
  <script src="https://passer-by.com/data_location/jquery.citys.js"></script>

  <!-- JotForm Widget API -->
  <script src="https://js.jotform.com/JotFormCustomWidget.min.js"></script>
</head>
<body>
  <label for="province">省：</label>
  <select id="province"></select>

  <label for="city">市：</label>
  <select id="city"></select>

  <label for="area">区：</label>
  <select id="area"></select>

  <script>
    $(function () {
      // 初始化城市联动插件
      $("#province").parent().citys({
        dataUrl: "https://githunter-007.github.io/cn_city-picker/list.json", // 官方已部署好的 JSON 数据
        nodata: "none",
        required: true,
        province: "北京市", // 默认省份，可自定义
        city: "市辖区",
        area: ""
      });

      // 监听 JotForm 的 ready 和 submit 事件
      JFCustomWidget.subscribe("ready", function () {
        // nothing to init here for now
      });

      JFCustomWidget.subscribe("submit", function () {
        var province = $("#province").val();
        var city = $("#city").val();
        var area = $("#area").val();

        // 检查字段是否都选择
        if (!province || !city || !area) {
          JFCustomWidget.sendSubmit({
            valid: false
          });
          return;
        }

        // 发送结果回 JotForm
        JFCustomWidget.sendSubmit({
          valid: true,
          value: {
            province: province,
            city: city,
            area: area
          }
        });
      });
    });
  </script>
</body>
</html>
